{
  "content": "# MCP Echo Service\n\nA Model Context Protocol (MCP) service that provides echo tools for testing MCP protocol functionality.\n\n## Features\n\n- **echo_message**: Echo back a message with optional uppercase formatting\n- **echo_with_delay**: Echo back a message after a simulated delay (max 5 seconds)  \n- **echo_json**: Echo back structured JSON data with analysis\n\n## Quick Start\n\n### Local Development\n\n```bash\n# Clone the repository\ngit clone https://github.com/NimbleBrainInc/mcp-echo.git\ncd mcp-echo\n\n# Install dependencies with uv\nuv sync\n\n# Run the server\nuv run python server.py\n\n# Or install in editable mode\nuv pip install -e .\npython server.py\n```\n\nThe server will start on `http://localhost:8000` with:\n- Health check: `GET /health`\n- MCP endpoint: `POST /mcp/` (note the trailing slash)\n\n### Docker\n\n```bash\n# Build the image\ndocker build -t nimbletools/mcp-echo .\n\n# Run the container\ndocker run -p 8000:8000 nimbletools/mcp-echo\n```\n\n## MCP Protocol Support\n\nThis server implements the full MCP (Model Context Protocol) specification:\n\n- **Transport**: Streamable HTTP with Server-Sent Events (SSE)\n- **Session Management**: Proper initialization handshake required\n- **Protocol Version**: 2024-11-05\n- **Framework**: FastMCP 2.11.2\n- **Python Version**: 3.13+\n\n### Session Management\n\nThe server requires proper MCP initialization:\n\n1. **Initialize**: Send `initialize` request to establish session\n2. **Initialized**: Send `notifications/initialized` notification \n3. **Tools**: Use session ID for all subsequent requests\n\n## API Usage\n\n### Complete MCP Example\n\n```bash\n# Step 1: Initialize session\nINIT_RESPONSE=$(curl -s -i -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"initialize\",\n    \"params\": {\n      \"protocolVersion\": \"2024-11-05\",\n      \"capabilities\": {},\n      \"clientInfo\": {\"name\": \"example-client\", \"version\": \"1.0.0\"}\n    },\n    \"id\": 1\n  }')\n\n# Extract session ID\nSESSION_ID=$(echo \"$INIT_RESPONSE\" | grep -i \"mcp-session-id\" | cut -d' ' -f2 | tr -d '\\r')\n\n# Step 2: Send initialized notification\ncurl -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -H \"mcp-session-id: $SESSION_ID\" \\\n  -d '{\"jsonrpc\": \"2.0\", \"method\": \"notifications/initialized\"}'\n\n# Step 3: List available tools\ncurl -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -H \"mcp-session-id: $SESSION_ID\" \\\n  -d '{\"jsonrpc\": \"2.0\", \"method\": \"tools/list\", \"id\": 2}'\n\n# Step 4: Call echo_message tool\ncurl -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -H \"mcp-session-id: $SESSION_ID\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"tools/call\", \n    \"params\": {\n      \"name\": \"echo_message\",\n      \"arguments\": {\"message\": \"Hello Echo!\", \"uppercase\": true}\n    },\n    \"id\": 3\n  }'\n\n# Step 5: Call echo_with_delay tool  \ncurl -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -H \"mcp-session-id: $SESSION_ID\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"echo_with_delay\",\n      \"arguments\": {\"message\": \"Delayed Echo\", \"delay_seconds\": 1}\n    },\n    \"id\": 4\n  }'\n\n# Step 6: Call echo_json tool\ncurl -X POST http://localhost:8000/mcp/ \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json, text/event-stream\" \\\n  -H \"mcp-session-id: $SESSION_ID\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"echo_json\", \n      \"arguments\": {\"data\": {\"test\": \"value\", \"number\": 42}}\n    },\n    \"id\": 5\n  }'\n```\n\n### Simple Health Check\n\n```bash\ncurl http://localhost:8000/health\n```\n\n## Development\n\n### Testing\n\n```bash\n# Install with dev dependencies\nuv sync --group dev\n\n# Run tests (includes async MCP client tests)\nuv run python -m pytest\n\n# Run with coverage\nuv run python -m pytest --cov=server\n\n# Run specific test\nuv run python -m pytest tests/test_server.py::test_echo_message_tool -v\n```\n\n### Building and Deployment\n\n```bash\n# Build Docker image\ndocker build -t mcp-echo .\n\n# Test the container\ndocker run -d --name mcp-test -p 8000:8000 mcp-echo\n\n# Check health\ncurl http://localhost:8000/health\n\n# Clean up\ndocker stop mcp-test && docker rm mcp-test\n```\n\n### Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Make your changes\n4. Add tests\n5. Submit a pull request\n\n## About\n\nPart of the [NimbleTools](https://www.nimbletools.ai) ecosystem.\nFrom the makers of [NimbleBrain](https://www.nimblebrain.ai). \n\n## License\n\nMIT License - see LICENSE file for details.\n",
  "fetchedAt": 1758568456331,
  "etag": "W/\"c8bca923dd1ca66666897b6dd7a93687fd89fc37269a78578cc4b07142117067\""
}