{
  "content": "[![Documentation for your agent](header.png)](https://ref.tools)\n[![smithery badge](https://smithery.ai/badge/@ref-tools/ref-tools-mcp)](https://smithery.ai/server/@ref-tools/ref-tools-mcp)\n\n# Ref MCP\n\nA [ModelContextProtocol](https://modelcontextprotocol.io) server that gives your AI coding tool or agent access to documentation for APIs, services, libraries etc. It's your one-stop-shop to keep your agent up-to-date on documentation in a fast and token-efficient way.\n\nFor more see info [ref.tools](https://ref.tools)\n\n## Agentic search for exactly the right context\n\nRef's tools are design to match how models search while using as little context as possible to reduce [context rot](https://research.trychroma.com/context-rot). The goal is to find exactly the context your coding agent needs to be successful while using minimum tokens.\n\nDepending on the complexity of the prompt, LLM coding agents like Claude Code will typically do one or more searches and then choose a few resources to read in more depth.\n\nFor a simple query about Figma's Comment REST API it will make a couple calls to get exactly what it needs:\n```\nSEARCH 'Figma API post comment endpoint documentation' (54 tokens)\nREAD https://www.figma.com/developers/api#post-comments-endpoint (385 tokens)\n```\n\nFor more complex situations, the LLM will try to refine it's prompt as it reads results. For example:\n```\nSEARCH 'n8n merge node vs Code node multiple inputs best practices' (126)\nREAD https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.merge/#merge (4961)\nREAD https://docs.n8n.io/flow-logic/merging/#merge-data-from-multiple-node-executions (138)\nSEARCH 'n8n Code node multiple inputs best practices when to use' (107)\nREAD https://docs.n8n.io/code/code-node/#usage (80)\nSEARCH 'n8n Code node access multiple inputs from different nodes' (370)\nSEARCH 'n8n Code node $input access multiple node inputs' (372)\nREAD https://docs.n8n.io/code/builtin/output-other-nodes/#output-of-other-nodes (2310)\n  ```\n\nRef takes advantage of MCP sessions to track search trajectory and minimize context usage. There's a lot more ideas cooking but here's what we've implemented so far.\n\n### 1. Filtering search results\nFor repeated similar searches in a session, Ref will never return repeated results. Traditionally, you dig farther in to search results by paging to the next result but this approach allows the agent to page AND adjust the prompt at the same time.\n\n### 2. Fetching the part of the page that matters\nWhen reading a page of documentation, Ref will use the agent's session search history to dropout less relevant sections and return the most relevant 5k tokens. This helps Ref avoid a big problem with standard `fetch()` web scraping which is when it hits a large documentation page you can easily end up pull in 20k+ tokens into context, most of which are irrelevant. \n\n## Why does minimizing tokens from documentation context matter?\n\n### 1. More context makes models dumber\n\nIt's well documented that as of July 2025 that models get dumber as you put in more tokens. You might have heard about how models are great with long context now and that's kind of true but not the whole picture. For a quick primer on some research, [checkout this video from the team at Chroma](https://www.youtube.com/watch?v=TUjQuC4ugak).\n\n### 2. Tokens cost $$$\n\nImagine you are using Claude Opus as a background agent and you start by having the agent pull in documentation context and suppose it pulls in 10000 tokens of context with 4000 being relevant and 6000 being extra noise. At API pricing, that 6k tokens cost about $0.09 PER STEP. If one prompt ends up taking 11 steps with Opus, you've spent $1 for no reason. \n\n\n## Setup\n\nThere are two options for setting up Ref as an MCP server, either via the streamable-http server (recommended) or local stdio server (legacy). \n\nThis repo contains the legacy stdio server. \n\n### Streamable HTTP (recommended)\n\n[![Install Ref MCP in Cursor](https://cursor.com/deeplink/mcp-install-dark.svg)](https://cursor.com/install-mcp?name=Ref&config=eyJjb21tYW5kIjoibnB4IiwiYXJncyI6WyIteSIsIm1jcC1yZW1vdGVAMC4xLjAtMCIsImh0dHBzOi8vYXBpLnJlZi50b29scy9tY3AiLCItLWhlYWRlcj14LXJlZi1hcGkta2V5OjxzaWduIHVwIHRvIGdldCBhbiBhcGkga2V5PiJdfQ==)\n\n```\n\"Ref\": {\n  \"type\": \"http\",\n  \"url\": \"https://api.ref.tools/mcp?apiKey=YOUR_API_KEY\"\n}\n```\n\n### stdio \n\n[![Install Ref MCP in Cursor (stdio)](https://cursor.com/deeplink/mcp-install-dark.svg)](https://cursor.com/install-mcp?name=Ref&config=eyJjb21tYW5kIjoibnB4IiwiYXJncyI6WyJyZWYtdG9vbHMtbWNwIl0sImVudiI6eyJSRUZfQVBJX0tFWSI6IjxzaWduIHVwIHRvIGdldCBhbiBhcGkga2V5PiJ9fQ==)\n\n```\n\"Ref\": {\n  \"command\": \"npx\",\n  \"args\": [\"ref-tools-mcp@latest\"],\n  \"env\": {\n    \"REF_API_KEY\": <sign up to get an api key>\n  }\n}\n```\n\n## Tools\n\nRef MCP server provides all the documentation related tools for your agent needs.\n\n### ref_search_documentation\n\nA powerful search tool to check technical documentation. Great for finding facts or code snippets. Can be used to search for public documentation on the web or github as well from private resources like repos and pdfs.\n\n**Parameters:**\n- `query` (required): Query to search for relevant documentation. This should be a full sentence or question.\n\n### ref_read_url\n\nA tool that fetches content from a URL and converts it to markdown for easy reading with Ref. This is powerful when used in conjunction with the ref_search_documentation tool that returns urls of relevant content.\n\n**Parameters:**\n- `url` (required): The URL of the webpage to read.\n\n\n## OpenAI deep research support\n\nRef can be used as a source for deep research. OpenAI requires specific tool definitions so when used with an OpenAI client, Ref will provide the same tools with slightly different naming.\n\n```\nref_search_documentation(query) -> search(query)\nref_read_url(url) -> fetch(id)\n```\n\n## Development\n\n```\nnpm install\nnpm run dev\n```\n\n### Running with Inspector\n\nFor development and debugging purposes, you can use the MCP Inspector tool. The Inspector provides a visual interface for testing and monitoring MCP server interactions.\n\nVisit the [Inspector documentation](https://modelcontextprotocol.io/docs/tools/inspector) for detailed setup instructions.\n\nTo test locally with Inspector:\n```\nnpm run inspect\n```\n\nOr run both the watcher and inspector:\n```\nnpm run dev\n```\n\n### Local Development\n\n1. Clone the repository\n2. Install dependencies:\n```bash\nnpm install\n```\n3. Build the project:\n```bash\nnpm run build\n```\n4. For development with auto-rebuilding:\n```bash\nnpm run watch\n```\n\n## License\n\nMIT\n",
  "fetchedAt": 1758568457572,
  "etag": "W/\"7845de2ff0b21cdcc3318f0eb9e4f71892d1872056ab07384a3c4a26a16b314a\""
}